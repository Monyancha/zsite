/*!
 * ZUI - v1.4.0 - 2016-04-29
 * http://zui.sexy
 * GitHub: https://github.com/easysoft/zui.git 
 * Copyright (c) 2016 cnezsoft.com; Licensed MIT
 */

!function(e,t){"use strict";var n,a=0,i='<div class="messager messager-{type} {placement}" id="messager{id}" style="display:none"><div class="messager-content"></div><div class="messager-actions"><button type="button" class="close action">&times;</button></div></div>',s={type:"default",placement:"top",time:4e3,parent:"body",icon:null,close:!0,fade:!0,scale:!0},o=function(t,n){var o=this;o.id=a++,n=o.options=e.extend({},s,n),o.message=(n.icon?'<i class="icon-'+n.icon+' icon"></i> ':"")+t,o.$=e(i.format(n)).toggleClass("fade",n.fade).toggleClass("scale",n.scale).attr("id","messager-"+o.id),n.close?o.$.on("click",".close",function(){o.hide()}):o.$.find(".close").remove(),o.$.find(".messager-content").html(o.message),o.$.data("zui.messager",o)};o.prototype.show=function(a){var i=this,s=this.options;n&&(n.id==i.id?i.$.removeClass("in"):n.isShow&&n.hide()),i.hiding&&(clearTimeout(i.hiding),i.hiding=null),a&&(i.message=(s.icon?'<i class="icon-'+s.icon+' icon"></i> ':"")+a,i.$.find(".messager-content").html(i.message)),i.$.appendTo(s.parent).show(),("top"===s.placement||"bottom"===s.placement||"center"===s.placement)&&i.$.css("left",(e(t).width()-i.$.width()-50)/2),("left"===s.placement||"right"===s.placement||"center"===s.placement)&&i.$.css("top",(e(t).height()-i.$.height()-50)/2),i.$.addClass("in"),s.time&&(i.hiding=setTimeout(function(){i.hide()},s.time)),i.isShow=!0,n=i},o.prototype.hide=function(){var e=this;e.$.hasClass("in")&&(e.$.removeClass("in"),setTimeout(function(){e.$.remove()},200)),e.isShow=!1};var r=function(e,t){"string"==typeof t&&(t={type:t});var n=new o(e,t);return n.show(),n},l=function(){e(".messager").each(function(){var t=e(this).data("zui.messager");t&&t.hide&&t.hide()})},d=function(e){return"string"==typeof e?{placement:e}:e};e.zui({Messager:o,showMessager:r,messager:{show:r,hide:l,primary:function(t,n){return r(t,e.extend({type:"primary"},d(n)))},success:function(t,n){return r(t,e.extend({type:"success",icon:"ok-sign"},d(n)))},info:function(t,n){return r(t,e.extend({type:"info",icon:"info-sign"},d(n)))},warning:function(t,n){return r(t,e.extend({type:"warning",icon:"warning-sign"},d(n)))},danger:function(t,n){return r(t,e.extend({type:"danger",icon:"exclamation-sign"},d(n)))},important:function(t,n){return r(t,e.extend({type:"important"},d(n)))},special:function(t,n){return r(t,e.extend({type:"special"},d(n)))}}})}(jQuery,window),function(e,t,n){"$:nomunge";function a(){i=t[r](function(){s.each(function(){var t=e(this),n=t.width(),a=t.height(),i=e.data(this,d);(n!==i.w||a!==i.h)&&t.trigger(l,[i.w=n,i.h=a])}),a()},o[p])}var i,s=e([]),o=e.resize=e.extend(e.resize,{}),r="setTimeout",l="resize",d=l+"-special-event",p="delay",c="throttleWindow";o[p]=250,o[c]=!0,e.event.special[l]={setup:function(){if(!o[c]&&this[r])return!1;var t=e(this);s=s.add(t),e.data(this,d,{w:t.width(),h:t.height()}),1===s.length&&a()},teardown:function(){if(!o[c]&&this[r])return!1;var t=e(this);s=s.not(t),t.removeData(d),s.length||clearTimeout(i)},add:function(t){function a(t,a,s){var o=e(this),r=e.data(this,d)||{};r.w=a!==n?a:o.width(),r.h=s!==n?s:o.height(),i.apply(this,arguments)}if(!o[c]&&this[r])return!1;var i;return e.isFunction(t)?(i=t,a):(i=t.handler,void(t.handler=a))}}}(jQuery,this),+function(e,t,n,a){"use strict";var i=function(t,n){this.$=e(t),this.options=this.getOptions(n),this.init()};i.DEFAULTS={selector:"li, div",dragCssClass:"invisible"},i.prototype.getOptions=function(t){return t=e.extend({},i.DEFAULTS,this.$.data(),t)},i.prototype.init=function(){this.bindEventToList(this.$.children(this.options.selector))},i.prototype.reset=function(){var t=this,n=this.$.children(this.options.selector).not(".drag-shadow");n.each(function(){var a=e(this);return a.data("zui.droppable")?(a.data("zui.droppable").options.target=n,void a.droppable("reset")):(t.bindEventToList(n),!1)})},i.prototype.bindEventToList=function(t){function n(t){var n=[];t.each(function(){var t=e(this).data("order");"number"==typeof t&&n.push(t)}),n.sort(function(e,t){return e-t});for(var a=t.length;n.length<a;)n.push(n.length?n[n.length-1]+1:0);s&&n.reverse();var i=0;t.each(function(){e(this).attr("data-order",n[i++])})}var a=this.$,i=this.options,s=i.reverse;n(t),t.droppable({trigger:i.trigger,target:a.children(i.selector),container:a,always:i.always,flex:!0,before:i.before,start:function(t){i.dragCssClass&&t.element.addClass(i.dragCssClass),e.zui.callEvent(i.start)},drag:function(t){if(a.addClass("sortable-sorting"),t.isIn){var o=t.element,r=t.target,l=o.attr("data-order"),d=r.attr("data-order");if(l==d)return;l>d?r[s?"after":"before"](o):r[s?"before":"after"](o);var p=a.children(i.selector).not(".drag-shadow");n(p),e.zui.callEvent(i.order,{list:p,element:o})}},finish:function(t){i.dragCssClass&&t.element&&t.element.removeClass(i.dragCssClass),e.zui.callEvent(i.finish,{list:a.children(i.selector),element:t.element}),a.removeClass("sortable-sorting")}})},e.fn.sortable=function(t){return this.each(function(){var n=e(this),a=n.data("zui.sortable"),s="object"==typeof t&&t;a?"object"==typeof t&&a.reset():n.data("zui.sortable",a=new i(this,s)),"string"==typeof t&&a[t]()})},e.fn.sortable.Constructor=i}(jQuery,window,document,Math),function(e,t,n){"use strict";var a=function(t,n){this.$=e(t),this.options=this.getOptions(n),this.init()};a.DEFAULTS={container:"body",deviation:5,sensorOffsetX:0,sensorOffsetY:0},a.prototype.getOptions=function(t){return t=e.extend({},a.DEFAULTS,this.$.data(),t)},a.prototype.callEvent=function(t,n){return e.zui.callEvent(this.options[t],n,this)},a.prototype.init=function(){this.handleMouseEvents()},a.prototype.handleMouseEvents=function(){var a=this.$,i=this,s=this.options,o="before";this.$triggerTarget=s.trigger?(e.isFunction(s.trigger)?s.trigger(a):a.find(s.trigger)).first():a,this.$triggerTarget.on("mousedown",function(r){function l(t){var o={left:t.pageX,top:t.pageY};if(!(n.abs(o.left-b.left)<s.deviation&&n.abs(o.top-b.top)<s.deviation)){if(null===u){var r=g.css("position");"absolute"!=r&&"relative"!=r&&"fixed"!=r&&(c=r,g.css("position","relative")),u=a.clone().removeClass("drag-from").addClass("drag-shadow").css({position:"absolute",width:a.outerWidth(),transition:"none"}).appendTo(g),a.addClass("dragging"),i.callEvent("start",{event:t,element:a})}var l={left:o.left-C.left,top:o.top-C.top},d={left:l.left-w.left,top:l.top-w.top};u.css(d),z.left=o.left,z.top=o.top;var p=!1;v=!1,s.flex||f.removeClass("drop-to");var y=null;if(f.each(function(){var t=e(this),n=t.offset(),a=t.outerWidth(),i=t.outerHeight(),r=n.left+s.sensorOffsetX,l=n.top+s.sensorOffsetY;return o.left>r&&o.top>l&&o.left<r+a&&o.top<l+i&&(y&&y.removeClass("drop-to"),y=t,!s.nested)?!1:void 0}),y){v=!0;var $=y.data("id");a.data("id")!=$&&(m=!1),(null===h||h.data("id")!==$&&!m)&&(p=!0),h=y,s.flex&&f.removeClass("drop-to"),h.addClass("drop-to")}s.flex?null!==h&&h.length&&(v=!0):(a.toggleClass("drop-in",v),u.toggleClass("drop-in",v)),i.callEvent("drag",{event:t,isIn:v,target:h,element:a,isNew:p,selfTarget:m,clickOffset:C,offset:l,position:{left:l.left-w.left,top:l.top-w.top},mouseOffset:o}),t.preventDefault()}}function d(n){if(c&&g.css("position",c),null===u)return a.removeClass("drag-from"),e(t).unbind("mousemove",l).unbind("mouseup",d),void i.callEvent("always",{event:n,cancel:!0});v||(h=null);var s=!0,o={left:n.pageX,top:n.pageY},r={left:o.left-C.left,top:o.top-C.top},p={left:o.left-z.left,top:o.top-z.top};z.left=o.left,z.top=o.top;var y={event:n,isIn:v,target:h,element:a,isNew:!m&&null!==h,selfTarget:m,offset:r,mouseOffset:o,position:{left:r.left-w.left,top:r.top-w.top},lastMouseOffset:z,moveOffset:p};s=i.callEvent("beforeDrop",y),s&&v&&i.callEvent("drop",y),e(t).unbind("mousemove",l).unbind("mouseup",d),f.removeClass("drop-to"),a.removeClass("dragging").removeClass("drag-from"),u.remove(),i.callEvent("finish",y),i.callEvent("always",y),n.preventDefault()}if(s.hasOwnProperty(o)&&e.isFunction(s[o])){var p=s[o]({event:r,element:a});if(void 0!==p&&!p)return}var c,f=e.isFunction(s.target)?s.target(a):e(s.target),h=null,u=null,g=e(s.container).first(),v=!1,m=!0,y=a.offset(),b={left:r.pageX,top:r.pageY},w=g.offset(),C={left:b.left-y.left,top:b.top-y.top},z={left:b.left,top:b.top};a.addClass("drag-from"),e(t).bind("mousemove",l).bind("mouseup",d),r.preventDefault()})},a.prototype.reset=function(){this.$triggerTarget.off("mousedown"),this.handleMouseEvents()},e.fn.droppable=function(t){return this.each(function(){var n=e(this),i=n.data("zui.droppable"),s="object"==typeof t&&t;i||n.data("zui.droppable",i=new a(this,s)),"string"==typeof t&&i[t]()})},e.fn.droppable.Constructor=a}(jQuery,document,Math),function(e,t){"use strict";function n(e,n,a,i){return t.abs((a-e)*(i-n))}function a(e,t,n,a,i,s){return e>=n&&i>=e&&t>=a&&s>=t}function i(e,i,s,o,r,l,d,p){var c=t.max(e,r),f=t.max(i,l),h=t.min(s,d),u=t.min(o,p);return a(c,f,e,i,s,o)&&a(h,u,e,i,s,o)&&a(c,f,r,l,d,p)&&a(h,u,r,l,d,p)?n(c,f,h,u):0}var s=function(t,n){this.$=e(t),this.options=this.getOptions(n),this.draggable=this.$.hasClass("dashboard-draggable")||this.options.draggable,this.init()};s.DEFAULTS={height:360,shadowType:"normal",sensitive:!1,circleShadowSize:100,onlyRefreshBody:!0,resizable:!0,resizeMessage:!0},s.prototype.getOptions=function(t){return t=e.extend({},s.DEFAULTS,this.$.data(),t)},s.prototype.handleRemoveEvent=function(){var t=this.options.afterPanelRemoved,n=this.options.panelRemovingTip;this.$.on("click",".remove-panel",function(){var a=e(this).closest(".panel"),i=a.data("name")||a.find(".panel-heading").text().replace("\n","").replace(/(^\s*)|(\s*$)/g,""),s=a.attr("data-id");(void 0===n||confirm(n.format(i)))&&(a.parent().remove(),t&&e.isFunction(t)&&t(s))})},s.prototype.handleRefreshEvent=function(){var t=this,n=this.options.onlyRefreshBody;this.$.on("click",".refresh-panel",function(){var a=e(this).closest(".panel");t.refresh(a,n)})},s.prototype.handleDraggable=function(){var a=this.$,s=this.options,o="circle"===s.shadowType,r=s.circleShadowSize,l=r/2,d=s.afterOrdered;this.$.addClass("dashboard-draggable"),this.$.on("mousedown",".panel-actions, .drag-disabled",function(e){e.stopPropagation()});var p;this.$.on("mousedown",".panel-heading, .panel-drag-handler",function(c){function f(a){var o=x.data("mouseOffset");g=a.pageX-o.x,v=a.pageY-o.y,m=g+R,y=v+S,x.css({left:g,top:v}),E.find(".dragging-in").removeClass("dragging-in"),C=!1,w=null;var r,l=0;E.children(":not(.dragging-col)").each(function(){var o=e(this);if(o.hasClass("dragging-col-holder"))return C=!s.sensitive||100>l,!0;var d=o.children(".panel"),p=d.offset(),c=d.width(),f=d.height(),h=p.left,u=p.top;if(s.sensitive)h-=D.left,u-=D.top,r=i(g,v,m,y,h,u,h+c,u+f),r>100&&r>l&&r>t.min(n(g,v,m,y),n(h,u,h+c,u+f))/3&&(l=r,w=o);else{var b=a.pageX,z=a.pageY;if(b>h&&z>u&&h+c>b&&u+f>z)return w=o,!1}}),w&&(b&&clearTimeout(b),z=w,b=setTimeout(h,50)),a.preventDefault()}function h(){z&&(z.addClass("dragging-in"),C?F.insertAfter(z):F.insertBefore(z),a.addClass("dashboard-holding"),b=null,z=null)}function u(t){b&&clearTimeout(b);var n=$.data("order");$.parent().insertAfter(F);var i=0,s={};E.children(":not(.dragging-col-holder)").each(function(){var t=e(this).children(".panel");t.data("order",++i),s[t.data("id")||t.attr("id")]=i,t.parent().attr("data-order",i)}),n!=s[$.data("id")||$.attr("id")]&&(E.data("orders",s),d&&e.isFunction(d)&&d(s)),x.remove(),a.removeClass("dashboard-holding"),a.find(".dragging-col").removeClass("dragging-col"),a.find(".panel-dragging").removeClass("panel-dragging"),E.find(".dragging-in").removeClass("dragging-in"),a.removeClass("dashboard-dragging"),e(document).unbind("mousemove",f).unbind("mouseup",u),t.preventDefault()}var g,v,m,y,b,w,C,z,$=e(this).closest(".panel"),T=$.parent(),E=$.closest(".row"),x=$.clone().addClass("panel-dragging-shadow"),O=$.offset(),D=a.offset(),F=E.find(".dragging-col-holder"),R=$.width(),S=$.height();F.length||(F=e('<div class="dragging-col-holder"><div class="panel"></div></div>').removeClass("dragging-col").appendTo(E)),p&&F.removeClass(p),F.addClass(p=T.attr("class")),F.insertBefore(T).find(".panel").replaceWith($.clone().addClass("panel-dragging panel-dragging-holder")),a.addClass("dashboard-dragging"),$.addClass("panel-dragging").parent().addClass("dragging-col"),x.css({left:O.left-D.left,top:O.top-D.top,width:R,height:S}).appendTo(a).data("mouseOffset",{x:c.pageX-O.left+D.left,y:c.pageY-O.top+D.top}),o&&(x.addClass("circle"),setTimeout(function(){x.css({left:c.pageX-D.left-l,top:c.pageY-D.top-l,width:r,height:r}).data("mouseOffset",{x:D.left+l,y:D.top+l})},100)),e(document).bind("mousemove",f).bind("mouseup",u),c.preventDefault()})},s.prototype.handlePanelPadding=function(){this.$.find(".panel-body > table, .panel-body > .list-group").parent().addClass("no-padding")},s.prototype.handlePanelHeight=function(){var n=this.options.height;this.$.children(".row").each(function(){var a=e(this),i=a.find(".panel"),s=a.data("height")||n;"number"!=typeof s&&(s=0,i.each(function(){s=t.max(s,e(this).innerHeight())})),i.css("height",s)})},s.prototype.handleResizeEvent=function(){var n=this.options.onResize,a=this.options.resizeMessage;this.$.on("mousedown",".resize-handle",function(i){var s=e(this).parent().addClass("resizing"),o=s.closest(".row"),r=i.pageX,l=s.width(),d=o.width(),p=t.round(12*l/d),c=p;s.attr("data-grid",p);var f=function(n){var i=n.pageX,o=t.max(1,t.min(12,t.round(12*(l+(i-r))/d)));c!=o&&(s.attr("data-grid",o).css("width",100*o/12+"%"),a&&e.zui.messager&&e.zui.messager.show(t.round(100*o/12)+"% ("+o+"/12)",{scale:!1,placement:"center",icon:"resize-h",fade:!1,close:!1}),c=o),n.preventDefault(),n.stopPropagation()},h=function(i){e.zui.messager&&e.zui.messager.hide(),s.removeClass("resizing");var o=s.attr("data-grid");if(p!=o&&e.isFunction(n)){var r=function(){s.attr("data-grid",p).css("width",null)},l=n({element:s,old:p,grid:o,revert:r});l===!1?r():l!==!0&&a&&e.zui.messager&&e.zui.messager.success(t.round(100*o/12)+"% ("+o+"/12)",{placement:"center",time:1e3,close:!1})}e("body").off("mousemove.resize",f).off("mouseup.resize",h),i.preventDefault(),i.stopPropagation()};e("body").on("mousemove.resize",f).on("mouseup.resize",h),i.preventDefault(),i.stopPropagation()}).children(".row").children(":not(.dragging-col-holder)").append('<div class="resize-handle"><i class="icon icon-resize-h"></i></div>')},s.prototype.refresh=function(t,n){var a=this.options.afterRefresh;t=e(t);var i=t.data("url");i&&(t.addClass("panel-loading").find(".panel-heading .icon-refresh,.panel-heading .icon-repeat").addClass("icon-spin"),e.ajax({url:i,dataType:"html"}).done(function(i){var s=e(i);s.hasClass("panel")?t.empty().append(s.children()):n?t.find(".panel-body").empty().html(i):t.html(i),e.isFunction(a)&&a.call(this,{result:!0,data:i})}).fail(function(){t.addClass("panel-error"),e.isFunction(a)&&a.call(this,{result:!1})}).always(function(){t.removeClass("panel-loading"),t.find(".panel-heading .icon-refresh,.panel-heading .icon-repeat").removeClass("icon-spin")}))},s.prototype.init=function(){var t=this.options,n=this;if(t.data){var a=e('<div class="row"/>');e.each(t.data,function(t,n){var i=e('<div class="col-sm-'+(n.colWidth||4)+'"/>',n.colAttrs),s=e('<div class="panel" data-id="'+(n.id||e.zui.uuid())+'"/>',n.panelAttrs);if(void 0!==n.content)if(e.isFunction(n.content)){var o=n.content(s);o!==!0&&s.html(o)}else s.html(n.content);a.append(i.append(s.data("url",n.url)))}),n.$.append(a)}n.handlePanelHeight(),n.handlePanelPadding(),n.handleRemoveEvent(),n.handleRefreshEvent(),t.resizable&&n.handleResizeEvent(),n.draggable&&n.handleDraggable();var i=0;n.$.find(".panel").each(function(){var a=e(this);a.data("order",++i),a.attr("id")||a.attr("id","panel"+i),a.attr("data-id")||a.attr("data-id",i),n.refresh(a,t.onlyRefreshBody)})},e.fn.dashboard=function(t){return this.each(function(){var n=e(this),a=n.data("zui.dashboard"),i="object"==typeof t&&t;a||n.data("zui.dashboard",a=new s(this,i)),"string"==typeof t&&a[t]()})},e.fn.dashboard.Constructor=s}(jQuery,Math);