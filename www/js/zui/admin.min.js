/*!
 * ZUI - v1.4.0 - 2016-04-28
 * http://zui.sexy
 * GitHub: https://github.com/easysoft/zui.git 
 * Copyright (c) 2016 cnezsoft.com; Licensed MIT
 */

!function(e,t){"use strict";var n,i=0,a='<div class="messager messager-{type} {placement}" id="messager{id}" style="display:none"><div class="messager-content"></div><div class="messager-actions"><button type="button" class="close action">&times;</button></div></div>',o={type:"default",placement:"top",time:4e3,parent:"body",icon:null,close:!0,fade:!0,scale:!0},s=function(t,n){var s=this;s.id=i++,n=s.options=e.extend({},o,n),s.message=(n.icon?'<i class="icon-'+n.icon+' icon"></i> ':"")+t,s.$=e(a.format(n)).toggleClass("fade",n.fade).toggleClass("scale",n.scale).attr("id","messager-"+s.id),n.close?s.$.on("click",".close",function(){s.hide()}):s.$.find(".close").remove(),s.$.find(".messager-content").html(s.message),s.$.data("zui.messager",s)};s.prototype.show=function(i){var a=this,o=this.options;n&&(n.id==a.id?a.$.removeClass("in"):n.isShow&&n.hide()),a.hiding&&(clearTimeout(a.hiding),a.hiding=null),i&&(a.message=(o.icon?'<i class="icon-'+o.icon+' icon"></i> ':"")+i,a.$.find(".messager-content").html(a.message)),a.$.appendTo(o.parent).show(),("top"===o.placement||"bottom"===o.placement||"center"===o.placement)&&a.$.css("left",(e(t).width()-a.$.width()-50)/2),("left"===o.placement||"right"===o.placement||"center"===o.placement)&&a.$.css("top",(e(t).height()-a.$.height()-50)/2),a.$.addClass("in"),o.time&&(a.hiding=setTimeout(function(){a.hide()},o.time)),a.isShow=!0,n=a},s.prototype.hide=function(){var e=this;e.$.hasClass("in")&&(e.$.removeClass("in"),setTimeout(function(){e.$.remove()},200)),e.isShow=!1};var r=function(e,t){"string"==typeof t&&(t={type:t});var n=new s(e,t);return n.show(),n},l=function(){e(".messager").each(function(){var t=e(this).data("zui.messager");t&&t.hide&&t.hide()})},d=function(e){return"string"==typeof e?{placement:e}:e};e.zui({Messager:s,showMessager:r,messager:{show:r,hide:l,primary:function(t,n){return r(t,e.extend({type:"primary"},d(n)))},success:function(t,n){return r(t,e.extend({type:"success",icon:"ok-sign"},d(n)))},info:function(t,n){return r(t,e.extend({type:"info",icon:"info-sign"},d(n)))},warning:function(t,n){return r(t,e.extend({type:"warning",icon:"warning-sign"},d(n)))},danger:function(t,n){return r(t,e.extend({type:"danger",icon:"exclamation-sign"},d(n)))},important:function(t,n){return r(t,e.extend({type:"important"},d(n)))},special:function(t,n){return r(t,e.extend({type:"special"},d(n)))}}})}(jQuery,window),function(e,t,n){"$:nomunge";function i(){a=t[r](function(){o.each(function(){var t=e(this),n=t.width(),i=t.height(),a=e.data(this,d);(n!==a.w||i!==a.h)&&t.trigger(l,[a.w=n,a.h=i])}),i()},s[c])}var a,o=e([]),s=e.resize=e.extend(e.resize,{}),r="setTimeout",l="resize",d=l+"-special-event",c="delay",f="throttleWindow";s[c]=250,s[f]=!0,e.event.special[l]={setup:function(){if(!s[f]&&this[r])return!1;var t=e(this);o=o.add(t),e.data(this,d,{w:t.width(),h:t.height()}),1===o.length&&i()},teardown:function(){if(!s[f]&&this[r])return!1;var t=e(this);o=o.not(t),t.removeData(d),o.length||clearTimeout(a)},add:function(t){function i(t,i,o){var s=e(this),r=e.data(this,d)||{};r.w=i!==n?i:s.width(),r.h=o!==n?o:s.height(),a.apply(this,arguments)}if(!s[f]&&this[r])return!1;var a;return e.isFunction(t)?(a=t,i):(a=t.handler,void(t.handler=i))}}}(jQuery,this),function(e,t){"use strict";if("undefined"==typeof e)throw new Error("ZUI requires jQuery");e.zui||(e.zui=function(t){e.isPlainObject(t)&&e.extend(e.zui,t)});var n=0;e.zui({uuid:function(){return 1e3*(new Date).getTime()+n++%1e3},callEvent:function(t,n,i){if(e.isFunction(t)){void 0!==i&&(t=e.proxy(t,i));var a=t(n);return n&&(n.result=a),!(void 0!==a&&!a)}return 1},clientLang:function(){var n,i=t.config;if("undefined"!=typeof i&&i.clientLang)n=i.clientLang;else{var a=e("html").attr("lang");n=a?a:navigator.userLanguage||navigator.userLanguage||"zh_cn"}return n.replace("-","_").toLowerCase()}}),e.fn.callEvent=function(t,n,i){var a=e(this),o=t.indexOf(".zui."),s=t;0>o&&i&&i.name?t+="."+i.name:s=t.substring(0,o);var r=e.Event(t,n);if(void 0===i&&o>0&&(i=a.data(t.substring(o+1))),i&&i.options){var l=i.options[s];e.isFunction(l)&&e.zui.callEvent(i.options[s],r,i)}return a.trigger(s,n),r}}(jQuery,window),function(e,t,n){"use strict";var i=function(t,n){this.$=e(t),this.options=this.getOptions(n),this.init()};i.DEFAULTS={container:"body",deviation:5,sensorOffsetX:0,sensorOffsetY:0},i.prototype.getOptions=function(t){return t=e.extend({},i.DEFAULTS,this.$.data(),t)},i.prototype.callEvent=function(t,n){return e.zui.callEvent(this.options[t],n,this)},i.prototype.init=function(){this.handleMouseEvents()},i.prototype.handleMouseEvents=function(){var i=this.$,a=this,o=this.options,s="before";this.$triggerTarget=o.trigger?(e.isFunction(o.trigger)?o.trigger(i):i.find(o.trigger)).first():i,this.$triggerTarget.on("mousedown",function(r){function l(t){var s={left:t.pageX,top:t.pageY};if(!(n.abs(s.left-b.left)<o.deviation&&n.abs(s.top-b.top)<o.deviation)){if(null===h){var r=g.css("position");"absolute"!=r&&"relative"!=r&&"fixed"!=r&&(f=r,g.css("position","relative")),h=i.clone().removeClass("drag-from").addClass("drag-shadow").css({position:"absolute",width:i.outerWidth(),transition:"none"}).appendTo(g),i.addClass("dragging"),a.callEvent("start",{event:t,element:i})}var l={left:s.left-C.left,top:s.top-C.top},d={left:l.left-w.left,top:l.top-w.top};h.css(d),z.left=s.left,z.top=s.top;var c=!1;v=!1,o.flex||p.removeClass("drop-to");var y=null;if(p.each(function(){var t=e(this),n=t.offset(),i=t.outerWidth(),a=t.outerHeight(),r=n.left+o.sensorOffsetX,l=n.top+o.sensorOffsetY;return s.left>r&&s.top>l&&s.left<r+i&&s.top<l+a&&(y&&y.removeClass("drop-to"),y=t,!o.nested)?!1:void 0}),y){v=!0;var $=y.data("id");i.data("id")!=$&&(m=!1),(null===u||u.data("id")!==$&&!m)&&(c=!0),u=y,o.flex&&p.removeClass("drop-to"),u.addClass("drop-to")}o.flex?null!==u&&u.length&&(v=!0):(i.toggleClass("drop-in",v),h.toggleClass("drop-in",v)),a.callEvent("drag",{event:t,isIn:v,target:u,element:i,isNew:c,selfTarget:m,clickOffset:C,offset:l,position:{left:l.left-w.left,top:l.top-w.top},mouseOffset:s}),t.preventDefault()}}function d(n){if(f&&g.css("position",f),null===h)return i.removeClass("drag-from"),e(t).unbind("mousemove",l).unbind("mouseup",d),void a.callEvent("always",{event:n,cancel:!0});v||(u=null);var o=!0,s={left:n.pageX,top:n.pageY},r={left:s.left-C.left,top:s.top-C.top},c={left:s.left-z.left,top:s.top-z.top};z.left=s.left,z.top=s.top;var y={event:n,isIn:v,target:u,element:i,isNew:!m&&null!==u,selfTarget:m,offset:r,mouseOffset:s,position:{left:r.left-w.left,top:r.top-w.top},lastMouseOffset:z,moveOffset:c};o=a.callEvent("beforeDrop",y),o&&v&&a.callEvent("drop",y),e(t).unbind("mousemove",l).unbind("mouseup",d),p.removeClass("drop-to"),i.removeClass("dragging").removeClass("drag-from"),h.remove(),a.callEvent("finish",y),a.callEvent("always",y),n.preventDefault()}if(o.hasOwnProperty(s)&&e.isFunction(o[s])){var c=o[s]({event:r,element:i});if(void 0!==c&&!c)return}var f,p=e.isFunction(o.target)?o.target(i):e(o.target),u=null,h=null,g=e(o.container).first(),v=!1,m=!0,y=i.offset(),b={left:r.pageX,top:r.pageY},w=g.offset(),C={left:b.left-y.left,top:b.top-y.top},z={left:b.left,top:b.top};i.addClass("drag-from"),e(t).bind("mousemove",l).bind("mouseup",d),r.preventDefault()})},i.prototype.reset=function(){this.$triggerTarget.off("mousedown"),this.handleMouseEvents()},e.fn.droppable=function(t){return this.each(function(){var n=e(this),a=n.data("zui.droppable"),o="object"==typeof t&&t;a||n.data("zui.droppable",a=new i(this,o)),"string"==typeof t&&a[t]()})},e.fn.droppable.Constructor=i}(jQuery,document,Math),+function(e,t,n,i){"use strict";var a=function(t,n){this.$=e(t),this.options=this.getOptions(n),this.init()};a.DEFAULTS={selector:"li, div",dragCssClass:"invisible"},a.prototype.getOptions=function(t){return t=e.extend({},a.DEFAULTS,this.$.data(),t)},a.prototype.init=function(){this.bindEventToList(this.$.children(this.options.selector))},a.prototype.reset=function(){var t=this,n=this.$.children(this.options.selector).not(".drag-shadow");n.each(function(){var i=e(this);return i.data("zui.droppable")?(i.data("zui.droppable").options.target=n,void i.droppable("reset")):(t.bindEventToList(n),!1)})},a.prototype.bindEventToList=function(t){function n(t){var n=[];t.each(function(){var t=e(this).data("order");"number"==typeof t&&n.push(t)}),n.sort(function(e,t){return e-t});for(var i=t.length;n.length<i;)n.push(n.length?n[n.length-1]+1:0);o&&n.reverse();var a=0;t.each(function(){e(this).attr("data-order",n[a++])})}var i=this.$,a=this.options,o=a.reverse;n(t),t.droppable({trigger:a.trigger,target:i.children(a.selector),container:i,always:a.always,flex:!0,before:a.before,start:function(t){a.dragCssClass&&t.element.addClass(a.dragCssClass),e.zui.callEvent(a.start)},drag:function(t){if(i.addClass("sortable-sorting"),t.isIn){var s=t.element,r=t.target,l=s.attr("data-order"),d=r.attr("data-order");if(l==d)return;l>d?r[o?"after":"before"](s):r[o?"before":"after"](s);var c=i.children(a.selector).not(".drag-shadow");n(c),e.zui.callEvent(a.order,{list:c,element:s})}},finish:function(t){a.dragCssClass&&t.element&&t.element.removeClass(a.dragCssClass),e.zui.callEvent(a.finish,{list:i.children(a.selector),element:t.element}),i.removeClass("sortable-sorting")}})},e.fn.sortable=function(t){return this.each(function(){var n=e(this),i=n.data("zui.sortable"),o="object"==typeof t&&t;i?"object"==typeof t&&i.reset():n.data("zui.sortable",i=new a(this,o)),"string"==typeof t&&i[t]()})},e.fn.sortable.Constructor=a}(jQuery,window,document,Math),function(e,t){"use strict";function n(e,n,i,a){return t.abs((i-e)*(a-n))}function i(e,t,n,i,a,o){return e>=n&&a>=e&&t>=i&&o>=t}function a(e,a,o,s,r,l,d,c){var f=t.max(e,r),p=t.max(a,l),u=t.min(o,d),h=t.min(s,c);return i(f,p,e,a,o,s)&&i(u,h,e,a,o,s)&&i(f,p,r,l,d,c)&&i(u,h,r,l,d,c)?n(f,p,u,h):0}var o=function(t,n){this.$=e(t),this.options=this.getOptions(n),this.draggable=this.$.hasClass("dashboard-draggable")||this.options.draggable,this.init()};o.DEFAULTS={height:360,shadowType:"normal",sensitive:!1,circleShadowSize:100,onlyRefreshBody:!0,resizable:!0,resizeMessage:!0},o.prototype.getOptions=function(t){return t=e.extend({},o.DEFAULTS,this.$.data(),t)},o.prototype.handleRemoveEvent=function(){var t=this.options.afterPanelRemoved,n=this.options.panelRemovingTip;this.$.on("click",".remove-panel",function(){var i=e(this).closest(".panel"),a=i.data("name")||i.find(".panel-heading").text().replace("\n","").replace(/(^\s*)|(\s*$)/g,""),o=i.attr("data-id");(void 0===n||confirm(n.format(a)))&&(i.parent().remove(),t&&e.isFunction(t)&&t(o))})},o.prototype.handleRefreshEvent=function(){var t=this,n=this.options.onlyRefreshBody;this.$.on("click",".refresh-panel",function(){var i=e(this).closest(".panel");t.refresh(i,n)})},o.prototype.handleDraggable=function(){var i=this.$,o=this.options,s="circle"===o.shadowType,r=o.circleShadowSize,l=r/2,d=o.afterOrdered;this.$.addClass("dashboard-draggable"),this.$.on("mousedown",".panel-actions, .drag-disabled",function(e){e.stopPropagation()});var c;this.$.on("mousedown",".panel-heading, .panel-drag-handler",function(f){function p(i){var s=x.data("mouseOffset");g=i.pageX-s.x,v=i.pageY-s.y,m=g+L,y=v+j,x.css({left:g,top:v}),T.find(".dragging-in").removeClass("dragging-in"),C=!1,w=null;var r,l=0;T.children(":not(.dragging-col)").each(function(){var s=e(this);if(s.hasClass("dragging-col-holder"))return C=!o.sensitive||100>l,!0;var d=s.children(".panel"),c=d.offset(),f=d.width(),p=d.height(),u=c.left,h=c.top;if(o.sensitive)u-=D.left,h-=D.top,r=a(g,v,m,y,u,h,u+f,h+p),r>100&&r>l&&r>t.min(n(g,v,m,y),n(u,h,u+f,h+p))/3&&(l=r,w=s);else{var b=i.pageX,z=i.pageY;if(b>u&&z>h&&u+f>b&&h+p>z)return w=s,!1}}),w&&(b&&clearTimeout(b),z=w,b=setTimeout(u,50)),i.preventDefault()}function u(){z&&(z.addClass("dragging-in"),C?F.insertAfter(z):F.insertBefore(z),i.addClass("dashboard-holding"),b=null,z=null)}function h(t){b&&clearTimeout(b);var n=$.data("order");$.parent().insertAfter(F);var a=0,o={};T.children(":not(.dragging-col-holder)").each(function(){var t=e(this).children(".panel");t.data("order",++a),o[t.data("id")||t.attr("id")]=a,t.parent().attr("data-order",a)}),n!=o[$.data("id")||$.attr("id")]&&(T.data("orders",o),d&&e.isFunction(d)&&d(o)),x.remove(),i.removeClass("dashboard-holding"),i.find(".dragging-col").removeClass("dragging-col"),i.find(".panel-dragging").removeClass("panel-dragging"),T.find(".dragging-in").removeClass("dragging-in"),i.removeClass("dashboard-dragging"),e(document).unbind("mousemove",p).unbind("mouseup",h),t.preventDefault()}var g,v,m,y,b,w,C,z,$=e(this).closest(".panel"),E=$.parent(),T=$.closest(".row"),x=$.clone().addClass("panel-dragging-shadow"),O=$.offset(),D=i.offset(),F=T.find(".dragging-col-holder"),L=$.width(),j=$.height();F.length||(F=e('<div class="dragging-col-holder"><div class="panel"></div></div>').removeClass("dragging-col").appendTo(T)),c&&F.removeClass(c),F.addClass(c=E.attr("class")),F.insertBefore(E).find(".panel").replaceWith($.clone().addClass("panel-dragging panel-dragging-holder")),i.addClass("dashboard-dragging"),$.addClass("panel-dragging").parent().addClass("dragging-col"),x.css({left:O.left-D.left,top:O.top-D.top,width:L,height:j}).appendTo(i).data("mouseOffset",{x:f.pageX-O.left+D.left,y:f.pageY-O.top+D.top}),s&&(x.addClass("circle"),setTimeout(function(){x.css({left:f.pageX-D.left-l,top:f.pageY-D.top-l,width:r,height:r}).data("mouseOffset",{x:D.left+l,y:D.top+l})},100)),e(document).bind("mousemove",p).bind("mouseup",h),f.preventDefault()})},o.prototype.handlePanelPadding=function(){this.$.find(".panel-body > table, .panel-body > .list-group").parent().addClass("no-padding")},o.prototype.handlePanelHeight=function(){var n=this.options.height;this.$.children(".row").each(function(){var i=e(this),a=i.find(".panel"),o=i.data("height")||n;"number"!=typeof o&&(o=0,a.each(function(){o=t.max(o,e(this).innerHeight())})),a.css("height",o)})},o.prototype.handleResizeEvent=function(){var n=this.options.onResize,i=this.options.resizeMessage;this.$.on("mousedown",".resize-handle",function(a){var o=e(this).parent().addClass("resizing"),s=o.closest(".row"),r=a.pageX,l=o.width(),d=s.width(),c=t.round(12*l/d),f=c;o.attr("data-grid",c);var p=function(n){var a=n.pageX,s=t.max(1,t.min(12,t.round(12*(l+(a-r))/d)));f!=s&&(o.attr("data-grid",s).css("width",100*s/12+"%"),i&&e.zui.messager&&e.zui.messager.show(t.round(100*s/12)+"% ("+s+"/12)",{scale:!1,placement:"center",icon:"resize-h",fade:!1,close:!1}),f=s),n.preventDefault(),n.stopPropagation()},u=function(a){e.zui.messager&&e.zui.messager.hide(),o.removeClass("resizing");var s=o.attr("data-grid");if(c!=s&&e.isFunction(n)){var r=function(){o.attr("data-grid",c).css("width",null)},l=n({element:o,old:c,grid:s,revert:r});l===!1?r():l!==!0&&i&&e.zui.messager&&e.zui.messager.success(t.round(100*s/12)+"% ("+s+"/12)",{placement:"center",time:1e3,close:!1})}e("body").off("mousemove.resize",p).off("mouseup.resize",u),a.preventDefault(),a.stopPropagation()};e("body").on("mousemove.resize",p).on("mouseup.resize",u),a.preventDefault(),a.stopPropagation()}).children(".row").children(":not(.dragging-col-holder)").append('<div class="resize-handle"><i class="icon icon-resize-h"></i></div>')},o.prototype.refresh=function(t,n){var i=this.options.afterRefresh;t=e(t);var a=t.data("url");a&&(t.addClass("panel-loading").find(".panel-heading .icon-refresh,.panel-heading .icon-repeat").addClass("icon-spin"),e.ajax({url:a,dataType:"html"}).done(function(a){var o=e(a);o.hasClass("panel")?t.empty().append(o.children()):n?t.find(".panel-body").empty().html(a):t.html(a),e.isFunction(i)&&i.call(this,{result:!0,data:a})}).fail(function(){t.addClass("panel-error"),e.isFunction(i)&&i.call(this,{result:!1})}).always(function(){t.removeClass("panel-loading"),t.find(".panel-heading .icon-refresh,.panel-heading .icon-repeat").removeClass("icon-spin")}))},o.prototype.init=function(){var t=this.options,n=this;if(t.data){var i=e('<div class="row"/>');e.each(t.data,function(t,n){var a=e('<div class="col-sm-'+(n.colWidth||4)+'"/>',n.colAttrs),o=e('<div class="panel" data-id="'+(n.id||e.zui.uuid())+'"/>',n.panelAttrs);if(void 0!==n.content)if(e.isFunction(n.content)){var s=n.content(o);s!==!0&&o.html(s)}else o.html(n.content);i.append(a.append(o.data("url",n.url)))}),n.$.append(i)}n.handlePanelHeight(),n.handlePanelPadding(),n.handleRemoveEvent(),n.handleRefreshEvent(),t.resizable&&n.handleResizeEvent(),n.draggable&&n.handleDraggable();var a=0;n.$.find(".panel").each(function(){var i=e(this);i.data("order",++a),i.attr("id")||i.attr("id","panel"+a),i.attr("data-id")||i.attr("data-id",a),n.refresh(i,t.onlyRefreshBody)})},e.fn.dashboard=function(t){return this.each(function(){var n=e(this),i=n.data("zui.dashboard"),a="object"==typeof t&&t;i||n.data("zui.dashboard",i=new o(this,a)),"string"==typeof t&&i[t]()})},e.fn.dashboard.Constructor=o}(jQuery,Math);