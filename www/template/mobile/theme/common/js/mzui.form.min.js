/*!
 * mzui - v0.1.0 - 2015-07-29
 * Copyright (c) 2015 cnezsoft.com; Licensed MIT
 */

/* Zepto v1.1.4-86-g0616279 - form - zeptojs.com/license */
!function(e){e.fn.serializeArray=function(){var i,t,n=[],r=function(e){return e.forEach?e.forEach(r):void n.push({name:i,value:e})};return this[0]&&e.each(this[0].elements,function(n,s){t=s.type,i=s.name,i&&"fieldset"!=s.nodeName.toLowerCase()&&!s.disabled&&"submit"!=t&&"reset"!=t&&"button"!=t&&"file"!=t&&("radio"!=t&&"checkbox"!=t||s.checked)&&r(e(s).val())}),n},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(i){e.push(encodeURIComponent(i.name)+"="+encodeURIComponent(i.value))}),e.join("&")},e.fn.submit=function(i){if(0 in arguments)this.bind("submit",i);else if(this.length){var t=e.Event("submit");this.eq(0).trigger(t),t.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto);

!function(a,b){"use strict";var c,d=".ajaxform",e="Fingerprint",f=function(b){var c=a.getFingerprint(),d=b.find("#fingerprint");d.length||b.append("<input type='hidden' id='fingerprint'  name='fingerprint' value='"+c+"'>"),d.val(c)},g=function(a,b){var c=a.find('[type="submit"]'),d="INPUT"===c.get(0).tagName?"val":"text",e="disable"===b,f=c.data("loading"),g=e?c[d]():c.data("normal");e&&c.data("normal",g),c.attr("disabled",e?"disabled":null),c[d](e?f:g)},h=function(c,e){if(c.length&&!c.data(d)){c.data(d,1);var h=function(b,f){return e&&a.isFunction(e[b])?e[b](f):void c.trigger(b+d,f)},i=function(a){var b=c.find(".form-message");if(b.length){var d=b.find(".content");(d.length?d:b).html(a),b.show()}else alert(a)};h("init"),e.checkfingerprint&&f(c),c.submit(function(d){var e=c.serializeArray(),f={};a.each(e,function(a,b){f[b.name]=b.value}),h("onSubmit",f),console.log("POST data: ",f),g(c,"disable"),a.post(c.attr("action")||b.location.href,a.param(f),function(b,d){if("success"==d){try{b=a.parseJSON(b),console.log("POST result: ",b),"success"===b.result?b.locate&&(location.href=b.locate):b.message&&("object"==typeof b.message||i(b.message))}catch(e){i(b||"No response.")}h("onSuccess",b)}else i("error: "+d),h("onError",d);g(c),h("onComplete",{response:b,status:d})}),d.preventDefault()}).on("change",function(a){c.find(".form-message").hide()})}};a.fn.ajaxform=function(b){return a(this).each(function(){var c=a(this);h(c,a.extend(c.data(),b))})},a.getFingerprint=function(){return c||(a.isFunction(b[e])?c=(new b[e]).get():(c="",a.each(navigator,function(a,b){"string"==typeof b&&(c+=b.length)}))),c},a(function(){a(".ajaxform").ajaxform()})}(Zepto,window);