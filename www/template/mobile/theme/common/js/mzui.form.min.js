/*!
 * mzui - v0.1.0 - 2015-07-29
 * Copyright (c) 2015 cnezsoft.com; Licensed MIT
 */

/* Zepto v1.1.4-86-g0616279 - form - zeptojs.com/license */
!function(e){e.fn.serializeArray=function(){var i,t,n=[],r=function(e){return e.forEach?e.forEach(r):void n.push({name:i,value:e})};return this[0]&&e.each(this[0].elements,function(n,s){t=s.type,i=s.name,i&&"fieldset"!=s.nodeName.toLowerCase()&&!s.disabled&&"submit"!=t&&"reset"!=t&&"button"!=t&&"file"!=t&&("radio"!=t&&"checkbox"!=t||s.checked)&&r(e(s).val())}),n},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(i){e.push(encodeURIComponent(i.name)+"="+encodeURIComponent(i.value))}),e.join("&")},e.fn.submit=function(i){if(0 in arguments)this.bind("submit",i);else if(this.length){var t=e.Event("submit");this.eq(0).trigger(t),t.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto);

!function(a,b){"use strict";var c=".ajaxform",d="Fingerprint",e=function(c){var e="";a.isFunction(b[d])?e=(new b[d]).get():a.each(navigator,function(a,b){"string"==typeof b&&(e+=b.length)});var f=c.find("#fingerprint");f.length||c.append("<input type='hidden' id='fingerprint'  name='fingerprint' value='"+e+"'>"),f.val(e)},f=function(a,b){var c=a.find('[type="submit"]'),d="INPUT"===c.get(0).tagName?"val":"text",e="disable"===b,f=c.data("loading"),g=e?c[d]():c.data("normal");e&&c.data("normal",g),c.attr("disabled",e?"disabled":null),c[d](e?f:g)},g=function(d,g){if(d.length&&!d.data(c)){d.data(c,1);var h=function(b,e){return g&&a.isFunction(g[b])?g[b](e):void d.trigger(b+c,e)},i=function(a){var b=d.find(".form-message");b.length?b.html(a).show():alert(a)};h("init"),g.checkfingerprint&&e(d),d.submit(function(c){var e=d.serializeArray(),g={};a.each(e,function(a,b){g[b.name]=b.value}),h("onSubmit",g),console.log("POST data: ",g),f(d,"disable"),a.post(d.attr("action")||b.location.href,a.param(g),function(b,c){if("success"==c){try{b=a.parseJSON(b),console.log("POST result: ",b),"success"===b.result?b.locate&&(location.href=b.locate):b.message&&("object"==typeof b.message||i(b.message))}catch(e){i(b||"No response.")}h("onSuccess",b)}else i("error: "+c),h("onError",c);f(d),h("onComplete",{response:b,status:c})}),c.preventDefault()}).on("change",function(a){d.find(".form-message").hide()})}};a.fn.ajaxform=function(b){return a(this).each(function(){var c=a(this);g(c,a.extend(c.data(),b))})},a(function(){a(".ajaxform").ajaxform()})}(Zepto,window);